<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Git Pull</title>
    <style>
        input {
            display: block;
            width: 100%;
        }
        button
        {
            cursor: pointer;
        }
        .form-controls>div
        {
            padding: 10px;
        }
    </style>
    <script src="jquery.js"></script>
</head>

<body>
    <form>
        <div class="form-controls">
            <div>
                <label>Remote Adrress:</label> <input required name="remote" value="github.com/DigitalNet/HopeVUE.git" />
            </div>
            <div>
                <label>Branch:</label> <input required name="branch" value="foster"  />
            </div>
            <div>
                <label>User Name:</label> <input required name="uname" value="humblesami" />
            </div>
            <div>
                <label>Password:</label> <input required name="password" type="password"   />
            </div>
            <div>
                <label>Commit Message:</label> <input name="message" placeholder="You have to fill it to push code, otherwise it will be pulled" type="message"   />
            </div>
        </div>
        <div>
            <button type="submit">Execute</button>
        </div>
    </form>
    <script>
        $('form:first').submit(function(){
            var input_data = {};
            var do_request = true;
            $('.form-controls input').each(function (i, el) {
                input_data[el.name] = el.value;
            });
            $('button').prop('disabled', true);
            
            var url = '/pull';
            if($('input[name="message"]').val())
            {
                url = '/push';
            }
            var options = {
                url: url,
                data:input_data,
                success:function (data) {
                    console.log(data);
                    $('button').prop('disabled', false);
                },
                error:function () {
                    $('button').prop('disabled', false);
                }
            };
            $.ajax(options);
            return false;
        });
    </script>
</body>
</html>
