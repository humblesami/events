<app-breadcrumb 
*ngIf="surveyDetails"
routes='[{"title":"Actions", "link":"/actions"}, {"title":"Surveys", "link":"/actions/surveys"}, {"title":"{{surveyDetails.name}}", "link":"/survey/{{surveyDetails.id}}"}]'
title="Results"></app-breadcrumb>
<div class="router-outlet">
    <link rel="stylesheet" href="/static/assets/css/survey.css" />
    <div class="container" *ngIf="surveyDetails">
        <div class="form-details">
            <div class="meeting-details-form">
                <div class="row">
                    <div *ngIf="surveyDetails.name" class="col-lg-12">
                        <div class="MainTitleHeadWrap">
                            <div class="HeadingWrap">
                                {{surveyDetails.name}}
                            </div>
                            <div class="MeetingBtnWrapper" *ngIf="surveyDetails.publish">
                                
                                <div class="btn-group">
                                    <a *ngIf="surveyDetails.is_respondent" id="{{surveyDetails.id}}" class="btn" routerLink='/survey/survey/details/{{surveyDetails.id}}'>Reattempt Survey</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 mr-b20" *ngIf="surveyDetails.questions">
                        <div *ngFor="let question of surveyDetails.questions" class="row surveyDetailsquestions">
                            <div class="col-sm-12 UserProfileDiscription">
                                <h4 class="my-4 text-primary font-weight-bold">Q: {{question.name}}?</h4>                   
                                <div *ngIf="question.user_answers && !question.chart_data.length">
                                    <div *ngFor="let answer of question.user_answers" style="display: flex">
                                        <div class="col-sm-4 border border-right-0 py-3">
                                            <div class="row" *ngIf="answer.user">
                                                <div class="col-lg-4">
                                                    <img src="{{socketService.server_url}}{{answer.user.photo}}" alt="user" class="rounded-circle" style="max-width: 100px;">
                                                </div>
                                                <div class="col-lg-8 mt-3">
                                                    <label>
                                                        {{answer.user.name}}
                                                    </label>
                                                    <h5>{{answer.user.email}}</h5>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-8 border py-3 font-weight-light">
                                            {{answer.answers}}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="question.chart_data.length && question.user_answers.length > 0" class="w-50 ml-25">
                                    <div class="canvas_warpper my-5">
                                        <div class="canvas_container">
                                                <canvas id="chartData-{{question.id}}"></canvas>
                                        </div>
                                    </div>
                                    <label>Choices</label> :
                                    <table class="table">
                                        <tbody>
                                            <tr *ngFor="let obj of question.chart_data">
                                                <td [ngStyle]="{'background-color': obj.color}"></td>
                                                <td>{{obj.option_name}}</td>
                                                <td>{{obj.option_result || 0}}</td>
                                                <td>{{obj.option_perc || 0}}%</td>
                                            </tr>
                                        </tbody>
                                    </table>                     
                                        <!-- <label>
                                            {{obj.option_name}} --
                                            {{obj.option_result || 0}} --
                                            {{obj.option_perc || 0}}
                                        </label> -->
                                    
                                </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>